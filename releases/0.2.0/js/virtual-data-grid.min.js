!function e(t,l,n){function i(r,o){if(!l[r]){if(!t[r]){var s="function"==typeof require&&require;if(!o&&s)return s(r,!0);if(a)return a(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var u=l[r]={exports:{}};t[r][0].call(u.exports,function(e){var l=t[r][1][e];return i(l||e)},u,u.exports,e,t,l,n)}return l[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e,t,l){"use strict";var n={};t.exports=n},{}],2:[function(e,t,l){"use strict";t.exports=function(e){function t(t){l[t]=void 0===e||void 0===e[t]?null:e[t]}var l=this;t("key"),t("value"),t("class"),t("rowNumber"),t("columnNumber"),this.updateAttributes=function(e){Object.keys(e).forEach(function(t){void 0!==e[t]&&void 0!==l[t]&&(l[t]=e[t])})}}},{}],3:[function(e,t,l){"use strict";t.exports=function(e){function t(t){l[t]=void 0===e||void 0===e[t]?null:e[t]}var l=this;t("cell"),t("cellObject"),t("cancelEvent"),this.updateAttributes=function(e){Object.keys(e).forEach(function(t){void 0!==e[t]&&void 0!==l[t]&&(l[t]=e[t])})}}},{}],4:[function(e,t,l){"use strict";function n(){a.bufferRowTopClass="buffer-row-top",a.bufferRowBottomClass="buffer-row-bottom",a.bufferColumnLeftClass="buffer-column-left",a.bufferColumnRightClass="buffer-column-right",a.headerRowClass="header-row",a.headerCellClass="header-cell",a.dataRowClass="data-row",a.dataCellClass="data-cell",a.minCellHeight=2,a.tableHeightOffset=2*a.minCellHeight,a.editedCells=[]}function i(e,t){a[e]=void 0===t?"function"==typeof s[e]?s[e](a):s[e]:t}var a=e("../instances/configuration"),r=e("../utils/configuration"),o=e("../utils/generator"),s={containerSelector:".data-container",fixedContainerClass:"fixed-container",fixedTableClass:"fixed-table",virtualContainerClass:"virtual-container",virtualTableClass:"virtual-table",editingCellClass:"editing-cell",editedCellClass:"edited-cell",cellWidth:150,cellHeight:50,containerHeight:r.getDefaultContainerHeight,dataSource:[{}],headers:[[{}]],fixedHeaders:[[{}]],indexOfCellKeyHeader:r.getIndexOfCellKeyHeader,isDsSimple:!0,colspanOffset:r.getMaxColspan,visibleRowNumber:r.getVisibleRowNumber,visibleColumnNumber:r.getVisibleColumnNumber,editable:!1,saveButtonSelector:null,onBeforeEdit:r.nil,onValidation:r.nil,onAfterEdit:r.nil,onBeforeSave:r.nil,onAfterSave:r.nil};t.exports={init:function(e){n(),i("containerSelector",e.containerSelector),i("fixedContainerClass",e.fixedContainerClass),i("fixedTableClass",e.fixedTableClass),i("virtualContainerClass",e.virtualContainerClass),i("virtualTableClass",e.virtualTableClass),i("editingCellClass",e.editingCellClass),i("editedCellClass",e.editedCellClass),i("cellWidth",e.cellWidth),i("cellHeight",e.cellHeight),i("containerHeight",r.calculateVirtualContainerHeight(a,e.containerHeight)),o.initContainers(a),i("dataSource",e.dataSource),i("headers",e.headers),i("fixedHeaders",e.fixedHeaders),i("indexOfCellKeyHeader",e.indexOfCellKeyHeader),i("isDsSimple",e.isDsSimple),i("colspanOffset",e.colspanOffset),i("visibleRowNumber",e.visibleRowNumber),i("visibleColumnNumber",e.visibleColumnNumber),i("editable",e.editable),i("saveButtonSelector",e.saveButtonSelector),i("visibleColumnNumber",e.visibleColumnNumber),i("onBeforeEdit",e.onBeforeEdit),i("onValidation",e.onValidation),i("onAfterEdit",e.onAfterEdit),i("onBeforeSave",e.onBeforeSave),i("onAfterSave",e.onAfterSave),a.tableWidth=(a.headers[a.indexOfCellKeyHeader].length-a.visibleColumnNumber)*a.cellWidth,a.tableHeight=(a.dataSource.length-a.visibleRowNumber+1)*a.cellHeight,a.leftCellOffset=0,a.topCellOffset=0},updateValue:i}},{"../instances/configuration":1,"../utils/configuration":8,"../utils/generator":12}],5:[function(e,t,l){"use strict";var n=e("./configuration"),i=e("../utils/event-handler"),a=e("../utils/generator"),r=e("../utils/dom"),o=e("../instances/configuration");t.exports={generateTable:function(e,t){n.init(t),a.initTable(o),a.initBuffers(o),r.updateTable(),i.addEvents()},destroyTable:function(){i.removeEvents(),r.destroyTable()}}},{"../instances/configuration":1,"../utils/dom":9,"../utils/event-handler":11,"../utils/generator":12,"./configuration":4}],6:[function(e,t,l){"use strict";void 0===Array.prototype.find&&(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,l=Object(this),n=l.length>>>0,i=arguments[1],a=0;a<n;a++)if(t=l[a],e.call(i,t,a,l))return t})},{}],7:[function(e,t,l){"use strict";NodeList.prototype.forEach||(NodeList.prototype.forEach=function(e,t){t=t||window;for(var l=0;l<this.length;l++)e.call(t,this[l],l,this)})},{}],8:[function(e,t,l){"use strict";function n(e,t){return void 0===t?t:e.tableHeightOffset+Math.floor(t/e.cellHeight)*e.cellHeight}t.exports={calculateVirtualContainerHeight:n,getDefaultContainerHeight:function(e){return n(e,window.innerHeight-document.querySelector(e.containerSelector).getBoundingClientRect().top-64)},getIndexOfCellKeyHeader:function(e){return e.headers.length-1},getMaxColspan:function(e){var t=0;return e.headers.forEach(function(e){e.forEach(function(e){void 0!==e.colspan&&t<e.colspan&&(t=e.colspan)})}),t},getVisibleRowNumber:function(e){return Math.floor((e.containerHeight-e.tableHeightOffset)/e.cellHeight)-e.headers.length},getVisibleColumnNumber:function(e){return Math.floor(document.querySelector("."+e.virtualContainerClass).offsetWidth/e.cellWidth+(e.colspanOffset>2?e.colspanOffset:2)+e.colspanOffset)},nil:function(){return function(){}}}},{}],9:[function(e,t,l){"use strict";function n(e,t){e.innerHTML=t.value,e.className=r.dataCellClass+" "+(t.class||"")}function i(){var e=0,t=1;document.querySelectorAll("."+r.virtualTableClass+" tr."+r.headerRowClass).forEach(function(l){l.querySelectorAll("td."+r.headerCellClass).forEach(function(l,n){var i=r.headers[e][r.leftCellOffset+n];if(t>1?(l.style.display="none",t--):(l.innerHTML=i.text||i.key||"",l.style.display="table-cell"),void 0===i.colspan)l.removeAttribute("colspan");else{var a=r.visibleColumnNumber<=n+i.colspan?r.visibleColumnNumber-n:i.colspan;l.setAttribute("colspan",a),t=a}}),e++,t=1}),document.querySelectorAll("."+r.virtualTableClass+" tr."+r.dataRowClass).forEach(function(e,t){e.querySelectorAll("td."+r.dataCellClass).forEach(function(e,l){n(e,a.getCell(r.topCellOffset+t,r.leftCellOffset+l))})}),document.querySelectorAll("."+r.fixedTableClass+" tr."+r.dataRowClass).forEach(function(e,t){e.querySelectorAll("td."+r.dataCellClass).forEach(function(e,l){n(e,a.getFixedCell(r.topCellOffset+t,l))})})}var a=e("./table"),r=e("../instances/configuration");t.exports={indexOfElement:function(e){for(var t=e.parentNode.childNodes,l=0;l<t.length;l++)if(t[l]===e)return l;return-1},updateCell:n,updateTable:i,resetEditingCell:function(e){document.querySelectorAll("."+r.virtualTableClass+" td."+r.editingCellClass).forEach(function(t){var l=t.querySelector("input");l.removeEventListener("blur",e),t.innerHTML=l.value,t.classList.remove(r.editingCellClass)})},resetEditedCell:function(){document.querySelectorAll("."+r.virtualTableClass+" td."+r.editingCellClass).forEach(function(e){e.classList.remove(r.editedCellClass)}),r.editedCells=[],i()},destroyTable:function(){document.querySelector(r.containerSelector).innerHTML=""}}},{"../instances/configuration":1,"./table":13}],10:[function(e,t,l){"use strict";var n=e("../models/event-arguments"),i=e("./table"),a=e("./dom"),r=e("../instances/configuration");t.exports={saveCells:function(){if(r.editable){var e=new n({cellObject:r.editedCells,cancelEvent:!1});r.onBeforeSave(e),e.cancelEvent||(r.editedCells.forEach(function(e){i.setCellValue(e.rowNumber,e.columnNumber,e.value)}),a.resetEditedCell(),r.onAfterSave(e))}}}},{"../instances/configuration":1,"../models/event-arguments":3,"./dom":9,"./table":13}],11:[function(e,t,l){"use strict";function n(e){e.preventDefault(),o.scrollTop+=e.deltaY,o.scrollLeft+=e.deltaX}function i(){d.resetEditingCell(a),f.initBuffers(C),d.updateTable()}function a(){var e=this.parentNode,t=d.indexOfElement(e.parentNode)+C.topCellOffset,l=d.indexOfElement(e)-1+C.leftCellOffset,n=u.getCell(t,l);if(n.updateAttributes({value:this.value,class:C.editedCellClass}),u.isCellChanged(n)){var i=new s({cell:e,cellObject:n,cancelEvent:!1});C.onValidation(i),!0!==i.cancelEdit&&(u.setUpdatedCellValue(i.cellObject),d.updateCell(i.cell,i.cellObject),C.onAfterEdit(i))}else d.resetEditingCell(a)}function r(){if(C.editable){var e=d.indexOfElement(this.parentNode)+C.topCellOffset,t=d.indexOfElement(this)-1+C.leftCellOffset,l=u.getCell(e,t),n=document.createElement("input");n.setAttribute("type","text");var i=new s({cell:this,cellObject:l,cancelEvent:!1});C.onBeforeEdit(i),i.cancelEvent||(this.classList.add(C.editingCellClass),this.classList.remove(C.editedCellClass),this.innerHTML="",this.appendChild(n),n.focus(),n.value=l.value,n.addEventListener("blur",a))}}var o,s=e("../models/event-arguments"),d=e("../utils/dom"),u=e("../utils/table"),c=e("../utils/edit"),f=e("../utils/generator"),C=e("../instances/configuration");t.exports={onClickCellEventHandler:r,addEvents:function(){null!==(o=document.querySelector("."+C.virtualContainerClass))&&(o.addEventListener("wheel",n,{passive:!1,capture:!0}),o.addEventListener("scroll",i)),C.editable&&null!==C.saveButtonSelector&&document.querySelector(C.saveButtonSelector).addEventListener("click",c.saveCells),C.editable&&document.querySelectorAll("."+C.virtualTableClass+" td."+C.dataCellClass).forEach(function(e){e.addEventListener("click",r)})},removeEvents:function(){document.querySelector("."+C.virtualContainerClass).removeEventListener("scroll",i)}}},{"../instances/configuration":1,"../models/event-arguments":3,"../utils/dom":9,"../utils/edit":10,"../utils/generator":12,"../utils/table":13}],12:[function(e,t,l){"use strict";t.exports={initTable:function(e){var t=document.createElement("thead"),l=document.createElement("tbody"),n=document.createElement("tr");n.classList.add(e.bufferRowTopClass);var i,a,r,o,s,d,u,c;for((s=document.createElement("td")).classList.add(e.bufferColumnLeftClass),n.appendChild(s),i=0;i<e.visibleColumnNumber;i++)(c=document.createElement("td")).style.minWidth=e.cellWidth+"px",n.appendChild(c);for((d=document.createElement("td")).classList.add(e.bufferColumnRightClass),n.appendChild(d),t.appendChild(n),e.headers.forEach(function(l){for((r=document.createElement("tr")).classList.add(e.headerRowClass),r.style.height=e.cellHeight+"px",(c=document.createElement("td")).classList.add(e.bufferColumnLeftClass),r.appendChild(c),a=0;a<e.visibleColumnNumber;a++)(c=document.createElement("td")).classList.add(e.headerCellClass),c.style.minWidth=e.cellWidth+"px",c.innerHTML=l[a].text||l[a].key||"",r.appendChild(c);(c=document.createElement("td")).classList.add(e.bufferColumnRightClass),r.appendChild(c),t.appendChild(r)}),i=0;i<e.visibleRowNumber;i++){for((o=document.createElement("tr")).classList.add(e.dataRowClass),o.style.height=e.cellHeight+"px",(c=document.createElement("td")).classList.add(e.bufferColumnLeftClass),o.appendChild(c),a=0;a<e.visibleColumnNumber;a++)(c=document.createElement("td")).classList.add(e.dataCellClass),c.style.minWidth=e.cellWidth+"px",o.appendChild(c);(c=document.createElement("td")).classList.add(e.bufferColumnRightClass),o.appendChild(c),l.appendChild(o)}if((u=document.createElement("tr")).classList.add(e.bufferRowBottomClass),l.appendChild(u),document.querySelector("."+e.virtualTableClass).appendChild(t),document.querySelector("."+e.virtualTableClass).appendChild(l),e.bufferLeft=document.querySelectorAll("."+e.bufferColumnLeftClass),e.bufferRight=document.querySelectorAll("."+e.bufferColumnRightClass),e.bufferTop=document.querySelectorAll("."+e.bufferRowTopClass),e.bufferBottom=document.querySelectorAll("."+e.bufferRowBottomClass),0!==e.fixedHeaders.length){var f=document.createElement("thead"),C=document.createElement("tbody");for(i=0;i<e.fixedHeaders.length;i++){for((r=document.createElement("tr")).classList.add(e.headerRowClass),r.style.height=e.cellHeight+"px",a=0;a<e.fixedHeaders[i].length;a++)(c=document.createElement("td")).classList.add(e.headerCellClass),c.style.minWidth=e.cellWidth+"px",c.innerHTML=e.fixedHeaders[i][a].text||e.fixedHeaders[i][a].key||"",r.appendChild(c);f.appendChild(r)}for(i=0;i<e.visibleRowNumber;i++){for((o=document.createElement("tr")).classList.add(e.dataRowClass),o.style.height=e.cellHeight+"px",a=0;a<e.fixedHeaders[e.indexOfCellKeyHeader].length;a++)(c=document.createElement("td")).classList.add(e.dataCellClass),c.style.minWidth=e.cellWidth+"px",o.appendChild(c);C.appendChild(o)}document.querySelector("."+e.fixedTableClass).appendChild(f),document.querySelector("."+e.fixedTableClass).appendChild(C)}},initContainers:function(e){var t=document.querySelector(e.containerSelector),l=document.createElement("div"),n=document.createElement("table"),i=document.createElement("div"),a=document.createElement("table");l.classList.add(e.virtualContainerClass),n.classList.add(e.virtualTableClass),i.classList.add(e.fixedContainerClass),a.classList.add(e.fixedTableClass),t.appendChild(i),i.appendChild(a),t.appendChild(l),l.appendChild(n),l.style.maxHeight=e.containerHeight+"px",l.style.overflow="scroll",i.style.padding=e.minCellHeight+"px 0",i.style.float="left"},initBuffers:function(e){var t=document.querySelector("."+e.virtualContainerClass).scrollLeft-document.querySelector("."+e.virtualContainerClass).scrollLeft%e.cellWidth-e.colspanOffset*e.cellWidth,l=e.tableWidth-t,n=document.querySelector("."+e.virtualContainerClass).scrollTop,i=e.tableHeight-n;t=t>e.tableWidth?e.tableWidth:t,t=t<0?0:t,l=e.tableWidth-t,n=n+e.minCellHeight>e.tableHeight?e.tableHeight+e.minCellHeight:n+e.minCellHeight,i=e.tableHeight-n,e.leftCellOffset=Math.floor(t/e.cellWidth),e.topCellOffset=Math.floor((n-n%e.cellHeight)/e.cellHeight),e.bufferLeft.forEach(function(e){e.style.minWidth=t+"px"}),e.bufferRight.forEach(function(e){e.style.minWidth=l+"px"}),e.bufferTop.forEach(function(e){e.style.height=n+"px"}),e.bufferBottom.forEach(function(e){e.style.height=i+"px"})}}},{}],13:[function(e,t,l){"use strict";function n(e,t){var l=a.editedCells.find(function(l){return l.rowNumber===e&&l.columnNumber===t}),n=a.headers[a.indexOfCellKeyHeader];return void 0===l&&(l=new i(a.isDsSimple?{key:n[t].key,value:a.dataSource[e][n[t].key]}:a.dataSource[e].find(function(e){return e.key===n[t].key}))).updateAttributes({rowNumber:e,columnNumber:t}),l}var i=e("../models/cell"),a=e("../instances/configuration");t.exports={getCell:n,getFixedCell:function(e,t){var l=a.fixedHeaders[a.indexOfCellKeyHeader];return new i(a.isDsSimple?{key:l[t].key,value:a.dataSource[e][l[t].key]}:a.dataSource[e].find(function(e){return e.key===l[t].key}))},setCellValue:function(e,t,l){var n=a.headers[a.indexOfCellKeyHeader];a.options.isDsSimple?a.dataSource[e][n[t].key]=l:a.dataSource[e].find(function(e){return e.key===n[t].key}).value=l},isCellChanged:function(e){var t=n(e.rowNumber,e.columnNumber),l=a.editedCells.find(function(t){return t.rowNumber===e.rowNumber&&t.columnNumber===e.columnNumber});return(t.value||"")!==e.value||void 0!==l},setUpdatedCellValue:function(e){var t=a.editedCells.find(function(t){return t.rowNumber===e.rowNumber&&t.columnNumber===e.columnNumber});void 0===t?a.editedCells.push(e):t.value=e.value}}},{"../instances/configuration":1,"../models/cell":2}],14:[function(e,t,l){"use strict";e("./pollyfills/Array.find.js"),e("./pollyfills/NodeList.forEach.js");var n=e("./modules/generator"),i=1;window.VirtualDataGrid=function(){var e=this;e.uniqueId=i++,e.generateTable=function(t){n.generateTable(e.uniqueId,t)},e.destroyTable=n.destroyTable,e.getId=function(){return e.uniqueId}}},{"./modules/generator":5,"./pollyfills/Array.find.js":6,"./pollyfills/NodeList.forEach.js":7}]},{},[14]);