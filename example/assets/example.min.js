"use strict";var virtualDG,colspans=[1,2,4,8,16];function generateHeaders(e,t){for(var n=[],r=0;r<t;r++){n.push([]);for(var a=colspans[t-r-1],u=1;u<=e/a;u++)n[r].push({key:"column_"+u,text:u+". column",dataType:"text",colspan:a})}return n}function generateData(e,t,n){var r,a,u,o=[],l=e.length-1;for(r=1;r<=n;r++){for(u={column_1:r},a=1;a<=e[l].length;a++)u[e[l][a-1].key]=r*(a+1)+". cell";for(a=1;a<=t[l].length;a++)u[t[l][a-1].key]=r*(a+1)+". cell";o.push(u)}return o}function generateDataGrid(){(virtualDG=new window.VirtualDataGrid).generateTable(getOptionsFromInputs())}function setupOptionContainer(){var e=window.innerHeight-document.querySelector(".main-container").getBoundingClientRect().top-20;document.querySelector(".generator-container").style.maxHeight=e+"px",document.querySelector(".generator-container").style.height=e+"px"}function setupOptions(){void 0===virtualDG&&(virtualDG=new window.VirtualDataGrid);var e=document.querySelectorAll("[name]");null!==e&&e.forEach(function(e){var t=e.getAttribute("type");"radio"!==t&&"checkbox"!==t&&(e.value="")}),Object.keys(virtualDG.DEFAULT_OPTIONS).forEach(function(e){fillInputsWithOptions(e,virtualDG.DEFAULT_OPTIONS[e])})}function fillInputsWithOptions(e,t){null!==t&&"object"==typeof t&&Object.keys(t).forEach(function(n){fillInputsWithOptions(e+"-"+n,t[n])});var n=document.querySelector("[name="+e+"]");if(null!==n&&"function"!=typeof t&&null!==t){var r=n.getAttribute("type");if("true"===n.getAttribute("data-no-default"))return;"radio"===r||"checkbox"===r?document.querySelectorAll("[name="+e+"]").forEach(function(e){e.checked=e.value===t+""}):n.value="object"==typeof t?JSON.stringify(t,null,2):t}}function getOptionsFromInputs(){var e={},t={};return document.querySelectorAll("[name]").forEach(function(t){var n=t.getAttribute("type"),r=t.classList.contains("function"),a=t.classList.contains("json");if("radio"!==n&&"checkbox"!==n||t.matches(":checked")){var u=t.value;""!==u&&("true"===u?u=!0:"false"===u&&(u=!1),r&&(u=evalFunctionValues(t)),a&&(u=JSON.parse(t.value)),"number"===n&&(u=parseInt(t.value,10)),e[t.getAttribute("name")]=u)}}),Object.keys(e).forEach(function(n){for(var r=n.split("-"),a=null,u=0;u<r.length;u++){var o=r[u];null===a?r.length-1===u?t[o]=e[n]:(void 0===t[o]&&(t[o]={}),a=t[o]):r.length-1===u?a[o]=e[n]:(void 0===a[o]&&(a[o]={}),a=a[o])}}),t}function evalFunctionValues(e){var t=e.getAttribute("data-attributes").split(",");return Function(t,e.value)}var isEventDelayed=!1;function resizeEventHandler(){isEventDelayed||(isEventDelayed=!0,window.setTimeout(function(){isEventDelayed=!1,setupOptionContainer()},200))}function initPage(){setupOptionContainer(),setupOptions(),getOptionsFromInputs()}window.addEventListener("load",function(){var e=document.querySelector("#generate-table"),t=document.querySelector("#test-options"),n=document.querySelector("#reset-to-default"),r=document.querySelector("#generate-data");initPage(),window.addEventListener("resize",resizeEventHandler),null!==e&&e.addEventListener("click",function(){var e=document.querySelector(".data-container");null!==e&&(e.innerHTML=""),generateDataGrid()}),null!==t&&t.addEventListener("click",function(){window.console.log(getOptionsFromInputs())}),null!==n&&n.addEventListener("click",setupOptions),null!==r&&r.addEventListener("click",function(){var e=document.querySelector("[name=headers]"),t=document.querySelector("[name=fixedHeaders]"),n=document.querySelector("[name=dataSource]"),r=document.querySelector("#data-generator-header-size"),a=document.querySelector("#data-generator-fixed-header-size"),u=document.querySelector("#data-generator-headers-row-size"),o=document.querySelector("#data-generator-data-size");if(null!==e&&null!==t&&null!==n&&null!==r&&null!==a&&null!==u&&null!==o){var l=parseInt(r.value,10),i=parseInt(a.value,10),c=parseInt(u.value,10),s=parseInt(o.value,10),d=generateHeaders(l,c),v=generateHeaders(i,c),f=generateData(d,v,s);e.value=JSON.stringify(d,null,2),t.value=JSON.stringify(v,null,2),n.value=JSON.stringify(f,null,2)}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidmlydHVhbERHIiwiY29sc3BhbnMiLCJnZW5lcmF0ZUhlYWRlcnMiLCJoZWFkZXJTaXplIiwiaGVhZGVyc1Jvd1NpemUiLCJoZWFkZXJzIiwiaSIsInB1c2giLCJjb2xzcGFuTnVtYmVyIiwiaiIsImtleSIsInRleHQiLCJkYXRhVHlwZSIsImNvbHNwYW4iLCJnZW5lcmF0ZURhdGEiLCJmaXhlZEhlYWRlcnMiLCJkYXRhc291cmNlU2l6ZSIsInJvdyIsImRzIiwibGFzdEhlYWRlckluZGV4IiwibGVuZ3RoIiwiY29sdW1uXzEiLCJnZW5lcmF0ZURhdGFHcmlkIiwid2luZG93IiwiVmlydHVhbERhdGFHcmlkIiwiZ2VuZXJhdGVUYWJsZSIsImdldE9wdGlvbnNGcm9tSW5wdXRzIiwic2V0dXBPcHRpb25Db250YWluZXIiLCJnZW5lcmF0b3JDb250YWluZXJIZWlnaHQiLCJpbm5lckhlaWdodCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsInN0eWxlIiwibWF4SGVpZ2h0IiwiaGVpZ2h0Iiwic2V0dXBPcHRpb25zIiwiaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dCIsImlucHV0VHlwZSIsImdldEF0dHJpYnV0ZSIsInZhbHVlIiwiT2JqZWN0Iiwia2V5cyIsIkRFRkFVTFRfT1BUSU9OUyIsImZpbGxJbnB1dHNXaXRoT3B0aW9ucyIsImtleUNoYWluIiwic3ViS2V5IiwiZWwiLCJjaGVja2VkIiwiSlNPTiIsInN0cmluZ2lmeSIsImZsYXRPcHRpb25zIiwib3B0aW9ucyIsImlzRnVuY3Rpb24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImlzSnNvbiIsIm1hdGNoZXMiLCJldmFsRnVuY3Rpb25WYWx1ZXMiLCJwYXJzZSIsInBhcnNlSW50IiwiZmxhdEtleSIsInBhcnRzIiwic3BsaXQiLCJwYXJ0RGF0YSIsInBhcnQiLCJwYXJhbUFycmF5IiwiRnVuY3Rpb24iLCJpc0V2ZW50RGVsYXllZCIsInJlc2l6ZUV2ZW50SGFuZGxlciIsInNldFRpbWVvdXQiLCJpbml0UGFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJnZW5lcmF0ZVRhYmxlQnV0dG9uIiwidGVzdE9wdGlvbnNCdXR0b24iLCJyZXNldFRvRGVmYXVsdEJ1dHRvbiIsImdlbmVyYXRlRGF0YUJ1dHRvbiIsImRhdGFDb250YWluZXIiLCJpbm5lckhUTUwiLCJjb25zb2xlIiwibG9nIiwiaGVhZGVyc0lucHV0IiwiZml4ZWRIZWFkZXJzSW5wdXQiLCJkYXRhU291cmNlSW5wdXQiLCJmaXhlZEhlYWRlclNpemUiLCJkYXRhU2l6ZSIsImhlYWRlclNpemVWYWx1ZSIsImZpeGVkSGVhZGVyU2l6ZVZhbHVlIiwiaGVhZGVyc1Jvd1NpemVWYWx1ZSIsImRhdGFTaXplVmFsdWUiLCJkYXRhIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLElBQUlBLFVBRUFDLFVBQWEsRUFBRyxFQUFHLEVBQUcsRUFBRyxJQUU3QixTQUFTQyxnQkFBZ0JDLEVBQVlDLEdBR3BDLElBRkEsSUFBSUMsS0FFS0MsRUFBSSxFQUFHQSxFQUFJRixFQUFnQkUsSUFBSyxDQUN4Q0QsRUFBUUUsU0FJUixJQUZBLElBQUlDLEVBQWdCUCxTQUFTRyxFQUFpQkUsRUFBSSxHQUV6Q0csRUFBSSxFQUFHQSxHQUFLTixFQUFhSyxFQUFlQyxJQUNoREosRUFBUUMsR0FBR0MsTUFDVkcsSUFBSyxVQUFZRCxFQUNqQkUsS0FBTUYsRUFBSSxXQUNWRyxTQUFVLE9BQ1ZDLFFBQVNMLElBS1osT0FBT0gsRUFHUixTQUFTUyxhQUFhVCxFQUFTVSxFQUFjQyxHQUM1QyxJQUlJVixFQUFHRyxFQUFHUSxFQUpOQyxLQUVIQyxFQURpQmQsRUFBUWUsT0FDVSxFQUlwQyxJQUFLZCxFQUFJLEVBQUdBLEdBQUtVLEVBQWdCVixJQUFLLENBS3JDLElBSkFXLEdBQ0NJLFNBQVVmLEdBR05HLEVBQUksRUFBR0EsR0FBS0osRUFBUWMsR0FBaUJDLE9BQVFY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QkFDekM1QixFQUFhMkIsU0FBU0MsY0FBYywrQkFDcEN5RCxFQUFrQjFELFNBQVNDLGNBQWMscUNBQ3pDM0IsRUFBaUIwQixTQUFTQyxjQUFjLG9DQUN4QzBELEVBQVczRCxTQUFTQyxjQUFjLDZCQUVuQyxHQUFxQixPQUFqQnNELEdBQStDLE9BQXRCQyxHQUFrRCxPQUFwQkMsR0FDM0MsT0FBZnBGLEdBQTJDLE9BQXBCcUYsR0FBK0MsT0FBbkJwRixHQUF3QyxPQUFicUYsRUFEL0UsQ0FLQSxJQUFJQyxFQUFrQjFCLFNBQVM3RCxFQUFXeUMsTUFBTyxJQUNoRCtDLEVBQXVCM0IsU0FBU3dCLEVBQWdCNUMsTUFBTyxJQUN2RGdELEVBQXNCNUIsU0FBUzVELEVBQWV3QyxNQUFPLElBQ3JEaUQsRUFBZ0I3QixTQUFTeUIsRUFBUzdDLE1BQU8sSUFDekN2QyxFQUFVSCxnQkFBZ0J3RixFQUFpQkUsR0FDM0M3RSxFQUFlYixnQkFBZ0J5RixFQUFzQkMsR0FDckRFLEVBQU9oRixhQUFhVCxFQUFTVSxFQUFjOEUsR0FFNUNSLEVBQWF6QyxNQUFRUyxLQUFLQyxVQUFVakQsRUFBUyxLQUFNLEdBQ25EaUYsRUFBa0IxQyxNQUFRUyxLQUFLQyxVQUFVdkMsRUFBYyxLQUFNLEdBQzdEd0UsRUFBZ0IzQyxNQUFRUyxLQUFLQyxVQUFVd0MsRUFBTSxLQUFNIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgdmlydHVhbERHO1xyXG5cclxudmFyIGNvbHNwYW5zID0gWyAxLCAyLCA0LCA4LCAxNiBdO1xyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVIZWFkZXJzKGhlYWRlclNpemUsIGhlYWRlcnNSb3dTaXplKSB7XHJcblx0dmFyIGhlYWRlcnMgPSBbXTtcclxuXHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXJzUm93U2l6ZTsgaSsrKSB7XHJcblx0XHRoZWFkZXJzLnB1c2goW10pO1xyXG5cclxuXHRcdHZhciBjb2xzcGFuTnVtYmVyID0gY29sc3BhbnNbaGVhZGVyc1Jvd1NpemUgLSBpIC0gMV07XHJcblxyXG5cdFx0Zm9yICh2YXIgaiA9IDE7IGogPD0gaGVhZGVyU2l6ZSAvIGNvbHNwYW5OdW1iZXI7IGorKykge1xyXG5cdFx0XHRoZWFkZXJzW2ldLnB1c2goe1xyXG5cdFx0XHRcdGtleTogJ2NvbHVtbl8nICsgaixcclxuXHRcdFx0XHR0ZXh0OiBqICsgJy4gY29sdW1uJyxcclxuXHRcdFx0XHRkYXRhVHlwZTogJ3RleHQnLFxyXG5cdFx0XHRcdGNvbHNwYW46IGNvbHNwYW5OdW1iZXJcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gaGVhZGVycztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVEYXRhKGhlYWRlcnMsIGZpeGVkSGVhZGVycywgZGF0YXNvdXJjZVNpemUpIHtcclxuXHR2YXIgZHMgPSBbXSxcclxuXHRcdGhlYWRlcnNSb3dTaXplID0gaGVhZGVycy5sZW5ndGgsXHJcblx0XHRsYXN0SGVhZGVySW5kZXggPSBoZWFkZXJzUm93U2l6ZSAtIDE7XHJcblxyXG5cdHZhciBpLCBqLCByb3csIGNLZXk7XHJcblxyXG5cdGZvciAoaSA9IDE7IGkgPD0gZGF0YXNvdXJjZVNpemU7IGkrKykge1xyXG5cdFx0cm93ID0ge1xyXG5cdFx0XHRjb2x1bW5fMTogaVxyXG5cdFx0fTtcclxuXHJcblx0XHRmb3IgKGogPSAxOyBqIDw9IGhlYWRlcnNbbGFzdEhlYWRlckluZGV4XS5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRjS2V5ID0gaGVhZGVyc1tsYXN0SGVhZGVySW5kZXhdW2ogLSAxXS5rZXk7XHJcblxyXG5cdFx0XHRyb3dbY0tleV0gPSAoaSAqIChqICsgMSkpICsgJy4gY2VsbCc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKGogPSAxOyBqIDw9IGZpeGVkSGVhZGVyc1tsYXN0SGVhZGVySW5kZXhdLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdGNLZXkgPSBmaXhlZEhlYWRlcnNbbGFzdEhlYWRlckluZGV4XVtqIC0gMV0ua2V5O1xyXG5cclxuXHRcdFx0cm93W2NLZXldID0gKGkgKiAoaiArIDEpKSArICcuIGNlbGwnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcblx0XHR9XHJcblxyXG5cdFx0ZHMucHVzaChyb3cpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIGRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZURhdGFHcmlkKCkge1xyXG5cdHZpcnR1YWxERyA9IG5ldyB3aW5kb3cuVmlydHVhbERhdGFHcmlkKCk7XHJcblx0dmlydHVhbERHLmdlbmVyYXRlVGFibGUoZ2V0T3B0aW9uc0Zyb21JbnB1dHMoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldHVwT3B0aW9uQ29udGFpbmVyKCkge1xyXG5cdHZhciBnZW5lcmF0b3JDb250YWluZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1jb250YWluZXInKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSAyMDtcclxuXHJcblx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdlbmVyYXRvci1jb250YWluZXInKS5zdHlsZS5tYXhIZWlnaHQgPSBnZW5lcmF0b3JDb250YWluZXJIZWlnaHQgKyAncHgnO1xyXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nZW5lcmF0b3ItY29udGFpbmVyJykuc3R5bGUuaGVpZ2h0ID0gZ2VuZXJhdG9yQ29udGFpbmVySGVpZ2h0ICsgJ3B4JztcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0dXBPcHRpb25zKCkge1xyXG5cdGlmICh0eXBlb2YgdmlydHVhbERHID09ICd1bmRlZmluZWQnKSB7XHJcblx0XHR2aXJ0dWFsREcgPSBuZXcgd2luZG93LlZpcnR1YWxEYXRhR3JpZCgpO1xyXG5cdH1cclxuXHJcblx0dmFyIGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tuYW1lXScpO1xyXG5cclxuXHRpZiAoaW5wdXRzICE9PSBudWxsKSB7XHJcblx0XHRpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpbnB1dCkge1xyXG5cdFx0XHR2YXIgaW5wdXRUeXBlID0gaW5wdXQuZ2V0QXR0cmlidXRlKCd0eXBlJyk7XHJcblxyXG5cdFx0XHRpZiAoaW5wdXRUeXBlICE9PSAncmFkaW8nICYmIGlucHV0VHlwZSAhPT0gJ2NoZWNrYm94Jykge1xyXG5cdFx0XHRcdGlucHV0LnZhbHVlID0gJyc7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0T2JqZWN0LmtleXModmlydHVhbERHLkRFRkFVTFRfT1BUSU9OUykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcclxuXHRcdGZpbGxJbnB1dHNXaXRoT3B0aW9ucyhrZXksIHZpcnR1YWxERy5ERUZBVUxUX09QVElPTlNba2V5XSk7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbGxJbnB1dHNXaXRoT3B0aW9ucyhrZXlDaGFpbiwgdmFsdWUpIHtcclxuXHRpZiAodmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xyXG5cdFx0T2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goZnVuY3Rpb24oc3ViS2V5KSB7XHJcblx0XHRcdGZpbGxJbnB1dHNXaXRoT3B0aW9ucyhrZXlDaGFpbiArICctJyArIHN1YktleSwgdmFsdWVbc3ViS2V5XSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHZhciBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPScgKyBrZXlDaGFpbiArICddJyk7XHJcblxyXG5cdGlmIChpbnB1dCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgIT09ICdmdW5jdGlvbicgJiYgdmFsdWUgIT09IG51bGwpIHtcclxuXHRcdHZhciBpbnB1dFR5cGUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSxcclxuXHRcdFx0bm9EZWZhdWx0ID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdkYXRhLW5vLWRlZmF1bHQnKTtcclxuXHJcblx0XHRpZiAobm9EZWZhdWx0ID09PSAndHJ1ZScpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fSBlbHNlIGlmIChpbnB1dFR5cGUgPT09ICdyYWRpbycgfHwgaW5wdXRUeXBlID09PSAnY2hlY2tib3gnKSB7XHJcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tuYW1lPScgKyBrZXlDaGFpbiArICddJykuZm9yRWFjaChmdW5jdGlvbihlbCkge1xyXG5cdFx0XHRcdGVsLmNoZWNrZWQgPSBlbC52YWx1ZSA9PT0gdmFsdWUgKyAnJztcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jykge1xyXG5cdFx0XHRpbnB1dC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCAyKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlucHV0LnZhbHVlID0gdmFsdWU7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRPcHRpb25zRnJvbUlucHV0cygpIHtcclxuXHR2YXIgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW25hbWVdJyksXHJcblx0XHRmbGF0T3B0aW9ucyA9IHt9LFxyXG5cdFx0b3B0aW9ucyA9IHt9O1xyXG5cclxuXHRpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpbnB1dCkge1xyXG5cdFx0dmFyIGlucHV0VHlwZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgndHlwZScpLFxyXG5cdFx0XHRpc0Z1bmN0aW9uID0gaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmdW5jdGlvbicpLFxyXG5cdFx0XHRpc0pzb24gPSBpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzb24nKTtcclxuXHJcblx0XHRpZiAoKGlucHV0VHlwZSA9PT0gJ3JhZGlvJyB8fCBpbnB1dFR5cGUgPT09ICdjaGVja2JveCcpICYmICFpbnB1dC5tYXRjaGVzKCc6Y2hlY2tlZCcpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR2YXIgdmFsdWUgPSBpbnB1dC52YWx1ZTtcclxuXHJcblx0XHRpZiAodmFsdWUgPT09ICcnKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodmFsdWUgPT09ICd0cnVlJykge1xyXG5cdFx0XHR2YWx1ZSA9IHRydWU7XHJcblx0XHR9IGVsc2UgaWYgKHZhbHVlID09PSAnZmFsc2UnKSB7XHJcblx0XHRcdHZhbHVlID0gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGlzRnVuY3Rpb24pIHtcclxuXHRcdFx0dmFsdWUgPSBldmFsRnVuY3Rpb25WYWx1ZXMoaW5wdXQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChpc0pzb24pIHtcclxuXHRcdFx0dmFsdWUgPSBKU09OLnBhcnNlKGlucHV0LnZhbHVlKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoaW5wdXRUeXBlID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHR2YWx1ZSA9IHBhcnNlSW50KGlucHV0LnZhbHVlLCAxMCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZmxhdE9wdGlvbnNbaW5wdXQuZ2V0QXR0cmlidXRlKCduYW1lJyldID0gdmFsdWU7XHJcblx0fSk7XHJcblxyXG5cdE9iamVjdC5rZXlzKGZsYXRPcHRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGZsYXRLZXkpIHtcclxuXHRcdHZhciBwYXJ0cyA9IGZsYXRLZXkuc3BsaXQoJy0nKSxcclxuXHRcdFx0cGFydERhdGEgPSBudWxsO1xyXG5cclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIHBhcnQgPSBwYXJ0c1tpXTtcclxuXHJcblx0XHRcdGlmIChwYXJ0RGF0YSA9PT0gbnVsbCkge1xyXG5cdFx0XHRcdGlmIChwYXJ0cy5sZW5ndGggLSAxID09PSBpKSB7XHJcblx0XHRcdFx0XHRvcHRpb25zW3BhcnRdID0gZmxhdE9wdGlvbnNbZmxhdEtleV07XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGlmICh0eXBlb2Ygb3B0aW9uc1twYXJ0XSA9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0XHRvcHRpb25zW3BhcnRdID0ge307XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0cGFydERhdGEgPSBvcHRpb25zW3BhcnRdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChwYXJ0cy5sZW5ndGggLSAxID09PSBpKSB7XHJcblx0XHRcdFx0cGFydERhdGFbcGFydF0gPSBmbGF0T3B0aW9uc1tmbGF0S2V5XTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpZiAodHlwZW9mIHBhcnREYXRhW3BhcnRdID09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRwYXJ0RGF0YVtwYXJ0XSA9IHt9O1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cGFydERhdGEgPSBwYXJ0RGF0YVtwYXJ0XTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRyZXR1cm4gb3B0aW9ucztcclxufVxyXG5cclxuZnVuY3Rpb24gZXZhbEZ1bmN0aW9uVmFsdWVzKGlucHV0KSB7XHJcblx0dmFyIHBhcmFtQXJyYXkgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXR0cmlidXRlcycpLnNwbGl0KCcsJyk7XHJcblxyXG5cdHJldHVybiBGdW5jdGlvbihwYXJhbUFycmF5LCBpbnB1dC52YWx1ZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxufVxyXG5cclxudmFyIGlzRXZlbnREZWxheWVkID0gZmFsc2U7XHJcblxyXG5mdW5jdGlvbiByZXNpemVFdmVudEhhbmRsZXIoKSB7XHJcblx0aWYgKCFpc0V2ZW50RGVsYXllZCkge1xyXG5cdFx0aXNFdmVudERlbGF5ZWQgPSB0cnVlO1xyXG5cclxuXHRcdHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpc0V2ZW50RGVsYXllZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0c2V0dXBPcHRpb25Db250YWluZXIoKTtcclxuXHRcdH0sIDIwMCk7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0UGFnZSgpIHtcclxuXHRzZXR1cE9wdGlvbkNvbnRhaW5lcigpO1xyXG5cdHNldHVwT3B0aW9ucygpO1xyXG5cdGdldE9wdGlvbnNGcm9tSW5wdXRzKCk7XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcblx0dmFyIGdlbmVyYXRlVGFibGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2VuZXJhdGUtdGFibGUnKSxcclxuXHRcdHRlc3RPcHRpb25zQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rlc3Qtb3B0aW9ucycpLFxyXG5cdFx0cmVzZXRUb0RlZmF1bHRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVzZXQtdG8tZGVmYXVsdCcpLFxyXG5cdFx0Z2VuZXJhdGVEYXRhQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dlbmVyYXRlLWRhdGEnKTtcclxuXHJcblx0aW5pdFBhZ2UoKTtcclxuXHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUV2ZW50SGFuZGxlcik7XHJcblxyXG5cdGlmIChnZW5lcmF0ZVRhYmxlQnV0dG9uICE9PSBudWxsKSB7XHJcblx0XHRnZW5lcmF0ZVRhYmxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBkYXRhQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGEtY29udGFpbmVyJyk7XHJcblxyXG5cdFx0XHRpZiAoZGF0YUNvbnRhaW5lciAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdGRhdGFDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGdlbmVyYXRlRGF0YUdyaWQoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0aWYgKHRlc3RPcHRpb25zQnV0dG9uICE9PSBudWxsKSB7XHJcblx0XHR0ZXN0T3B0aW9uc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR3aW5kb3cuY29uc29sZS5sb2coZ2V0T3B0aW9uc0Zyb21JbnB1dHMoKSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGlmIChyZXNldFRvRGVmYXVsdEJ1dHRvbiAhPT0gbnVsbCkge1xyXG5cdFx0cmVzZXRUb0RlZmF1bHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZXR1cE9wdGlvbnMpO1xyXG5cdH1cclxuXHJcblx0aWYgKGdlbmVyYXRlRGF0YUJ1dHRvbiAhPT0gbnVsbCkge1xyXG5cdFx0Z2VuZXJhdGVEYXRhQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBoZWFkZXJzSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT1oZWFkZXJzXScpLFxyXG5cdFx0XHRcdGZpeGVkSGVhZGVyc0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9Zml4ZWRIZWFkZXJzXScpLFxyXG5cdFx0XHRcdGRhdGFTb3VyY2VJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPWRhdGFTb3VyY2VdJyksXHJcblx0XHRcdFx0aGVhZGVyU2l6ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRhLWdlbmVyYXRvci1oZWFkZXItc2l6ZScpLFxyXG5cdFx0XHRcdGZpeGVkSGVhZGVyU2l6ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRhLWdlbmVyYXRvci1maXhlZC1oZWFkZXItc2l6ZScpLFxyXG5cdFx0XHRcdGhlYWRlcnNSb3dTaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGEtZ2VuZXJhdG9yLWhlYWRlcnMtcm93LXNpemUnKSxcclxuXHRcdFx0XHRkYXRhU2l6ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRhLWdlbmVyYXRvci1kYXRhLXNpemUnKTtcclxuXHJcblx0XHRcdGlmIChoZWFkZXJzSW5wdXQgPT09IG51bGwgfHwgZml4ZWRIZWFkZXJzSW5wdXQgPT09IG51bGwgfHwgZGF0YVNvdXJjZUlucHV0ID09PSBudWxsIHx8XHJcblx0XHRcdFx0aGVhZGVyU2l6ZSA9PT0gbnVsbCB8fCBmaXhlZEhlYWRlclNpemUgPT09IG51bGwgfHwgaGVhZGVyc1Jvd1NpemUgPT09IG51bGwgfHwgZGF0YVNpemUgPT09IG51bGwpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBoZWFkZXJTaXplVmFsdWUgPSBwYXJzZUludChoZWFkZXJTaXplLnZhbHVlLCAxMCksXHJcblx0XHRcdFx0Zml4ZWRIZWFkZXJTaXplVmFsdWUgPSBwYXJzZUludChmaXhlZEhlYWRlclNpemUudmFsdWUsIDEwKSxcclxuXHRcdFx0XHRoZWFkZXJzUm93U2l6ZVZhbHVlID0gcGFyc2VJbnQoaGVhZGVyc1Jvd1NpemUudmFsdWUsIDEwKSxcclxuXHRcdFx0XHRkYXRhU2l6ZVZhbHVlID0gcGFyc2VJbnQoZGF0YVNpemUudmFsdWUsIDEwKSxcclxuXHRcdFx0XHRoZWFkZXJzID0gZ2VuZXJhdGVIZWFkZXJzKGhlYWRlclNpemVWYWx1ZSwgaGVhZGVyc1Jvd1NpemVWYWx1ZSksXHJcblx0XHRcdFx0Zml4ZWRIZWFkZXJzID0gZ2VuZXJhdGVIZWFkZXJzKGZpeGVkSGVhZGVyU2l6ZVZhbHVlLCBoZWFkZXJzUm93U2l6ZVZhbHVlKSxcclxuXHRcdFx0XHRkYXRhID0gZ2VuZXJhdGVEYXRhKGhlYWRlcnMsIGZpeGVkSGVhZGVycywgZGF0YVNpemVWYWx1ZSk7XHJcblxyXG5cdFx0XHRoZWFkZXJzSW5wdXQudmFsdWUgPSBKU09OLnN0cmluZ2lmeShoZWFkZXJzLCBudWxsLCAyKTtcclxuXHRcdFx0Zml4ZWRIZWFkZXJzSW5wdXQudmFsdWUgPSBKU09OLnN0cmluZ2lmeShmaXhlZEhlYWRlcnMsIG51bGwsIDIpO1xyXG5cdFx0XHRkYXRhU291cmNlSW5wdXQudmFsdWUgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufSk7Il19
