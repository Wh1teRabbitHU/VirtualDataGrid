"use strict";function generateHeaders(e,t){for(var n=[],r=0;r<t;r++){n.push([]);for(var a=1;a<=e;a++)n[r].push({key:"column_"+a,text:a+". column",dataType:"text"})}return n}function generateData(e,t,n){var r,a,u,o=[],i=e.length-1;for(r=1;r<=n;r++){for(u={column_1:r},a=1;a<=e[i].length;a++)u[e[i][a-1].key]=r*(a+1)+". cell";for(a=1;a<=t[i].length;a++)u[t[i][a-1].key]=r*(a+1)+". cell";o.push(u)}return o}function generateDataGrid(){(virtualDG=new window.VirtualDataGrid).generateTable(getOptionsFromInputs())}function setupOptionContainer(){var e=window.innerHeight-document.querySelector(".main-container").getBoundingClientRect().top-20;document.querySelector(".generator-container").style.maxHeight=e+"px",document.querySelector(".generator-container").style.height=e+"px"}function setupOptions(){void 0===virtualDG&&(virtualDG=new window.VirtualDataGrid);var e=document.querySelectorAll("[name]");null!==e&&e.forEach(function(e){var t=e.getAttribute("type");"radio"!==t&&"checkbox"!==t&&(e.value="")}),Object.keys(virtualDG.DEFAULT_OPTIONS).forEach(function(e){fillInputsWithOptions(e,virtualDG.DEFAULT_OPTIONS[e])})}function fillInputsWithOptions(e,t){null!==t&&"object"==typeof t&&Object.keys(t).forEach(function(n){fillInputsWithOptions(e+"-"+n,t[n])});var n=document.querySelector("[name="+e+"]");if(null!==n&&"function"!=typeof t&&null!==t){var r=n.getAttribute("type");if("true"===n.getAttribute("data-no-default"))return;"radio"===r||"checkbox"===r?document.querySelectorAll("[name="+e+"]").forEach(function(e){e.checked=e.value===t+""}):n.value="object"==typeof t?JSON.stringify(t,null,2):t}}function getOptionsFromInputs(){var e={},t={};return document.querySelectorAll("[name]").forEach(function(t){var n=t.getAttribute("type"),r=t.classList.contains("function"),a=t.classList.contains("json");if("radio"!==n&&"checkbox"!==n||t.matches(":checked")){var u=t.value;""!==u&&("true"===u?u=!0:"false"===u&&(u=!1),r&&(u=evalFunctionValues(t)),a&&(u=JSON.parse(t.value)),"number"===n&&(u=parseInt(t.value,10)),e[t.getAttribute("name")]=u)}}),Object.keys(e).forEach(function(n){for(var r=n.split("-"),a=null,u=0;u<r.length;u++){var o=r[u];null===a?r.length-1===u?t[o]=e[n]:(void 0===t[o]&&(t[o]={}),a=t[o]):r.length-1===u?a[o]=e[n]:(void 0===a[o]&&(a[o]={}),a=a[o])}}),t}function evalFunctionValues(e){var t=e.getAttribute("data-attributes").split(",");return Function(t,e.value)}function resizeEventHandler(){isEventDelayed||(isEventDelayed=!0,window.setTimeout(function(){isEventDelayed=!1,setupOptionContainer()},200))}function initPage(){setupOptionContainer(),setupOptions(),getOptionsFromInputs()}var virtualDG,isEventDelayed=!1;window.addEventListener("load",function(){var e=document.querySelector("#generate-table"),t=document.querySelector("#test-options"),n=document.querySelector("#reset-to-default"),r=document.querySelector("#generate-data");initPage(),window.addEventListener("resize",resizeEventHandler),null!==e&&e.addEventListener("click",function(){var e=document.querySelector(".data-container");null!==e&&(e.innerHTML=""),generateDataGrid()}),null!==t&&t.addEventListener("click",function(){window.console.log(getOptionsFromInputs())}),null!==n&&n.addEventListener("click",setupOptions),null!==r&&r.addEventListener("click",function(){var e=document.querySelector("[name=headers]"),t=document.querySelector("[name=fixedHeaders]"),n=document.querySelector("[name=dataSource]"),r=document.querySelector("#data-generator-header-size"),a=document.querySelector("#data-generator-fixed-header-size"),u=document.querySelector("#data-generator-headers-row-size"),o=document.querySelector("#data-generator-data-size");if(null!==e&&null!==t&&null!==n&&null!==r&&null!==a&&null!==u&&null!==o){var i=parseInt(r.value,10),l=parseInt(a.value,10),c=parseInt(u.value,10),s=parseInt(o.value,10),d=generateHeaders(i,c),v=generateHeaders(l,c),f=generateData(d,v,s);e.value=JSON.stringify(d,null,2),t.value=JSON.stringify(v,null,2),n.value=JSON.stringify(f,null,2)}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZ2VuZXJhdGVIZWFkZXJzIiwiaGVhZGVyU2l6ZSIsImhlYWRlcnNSb3dTaXplIiwiaGVhZGVycyIsImkiLCJwdXNoIiwiaiIsImtleSIsInRleHQiLCJkYXRhVHlwZSIsImdlbmVyYXRlRGF0YSIsImZpeGVkSGVhZGVycyIsImRhdGFzb3VyY2VTaXplIiwicm93IiwiZHMiLCJsYXN0SGVhZGVySW5kZXgiLCJsZW5ndGgiLCJjb2x1bW5fMSIsImdlbmVyYXRlRGF0YUdyaWQiLCJ2aXJ0dWFsREciLCJ3aW5kb3ciLCJWaXJ0dWFsRGF0YUdyaWQiLCJnZW5lcmF0ZVRhYmxlIiwiZ2V0T3B0aW9uc0Zyb21JbnB1dHMiLCJzZXR1cE9wdGlvbkNvbnRhaW5lciIsImdlbmVyYXRvckNvbnRhaW5lckhlaWdodCIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwic3R5bGUiLCJtYXhIZWlnaHQiLCJoZWlnaHQiLCJzZXR1cE9wdGlvbnMiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImlucHV0IiwiaW5wdXRUeXBlIiwiZ2V0QXR0cmlidXRlIiwidmFsdWUiLCJPYmplY3QiLCJrZXlzIiwiREVGQVVMVF9PUFRJT05TIiwiZmlsbElucHV0c1dpdGhPcHRpb25zIiwia2V5Q2hhaW4iLCJzdWJLZXkiLCJlbCIsImNoZWNrZWQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmxhdE9wdGlvbnMiLCJvcHRpb25zIiwiaXNGdW5jdGlvbiIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiaXNKc29uIiwibWF0Y2hlcyIsImV2YWxGdW5jdGlvblZhbHVlcyIsInBhcnNlIiwicGFyc2VJbnQiLCJmbGF0S2V5IiwicGFydHMiLCJzcGxpdCIsInBhcnREYXRhIiwicGFydCIsInBhcmFtQXJyYXkiLCJGdW5jdGlvbiIsInJlc2l6ZUV2ZW50SGFuZGxlciIsImlzRXZlbnREZWxheWVkIiwic2V0VGltZW91dCIsImluaXRQYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdlbmVyYXRlVGFibGVCdXR0b24iLCJ0ZXN0T3B0aW9uc0J1dHRvbiIsInJlc2V0VG9EZWZhdWx0QnV0dG9uIiwiZ2VuZXJhdGVEYXRhQnV0dG9uIiwiZGF0YUNvbnRhaW5lciIsImlubmVySFRNTCIsImNvbnNvbGUiLCJsb2ciLCJoZWFkZXJzSW5wdXQiLCJmaXhlZEhlYWRlcnNJbnB1dCIsImRhdGFTb3VyY2VJbnB1dCIsImZpeGVkSGVhZGVyU2l6ZSIsImRhdGFTaXplIiwiaGVhZGVyU2l6ZVZhbHVlIiwiZml4ZWRIZWFkZXJTaXplVmFsdWUiLCJoZWFkZXJzUm93U2l6ZVZhbHVlIiwiZGF0YVNpemVWYWx1ZSIsImRhdGEiXSwibWFwcGluZ3MiOiJBQUFBLGFBSUEsU0FBU0EsZ0JBQWdCQyxFQUFZQyxHQUdwQyxJQUFLLElBRkRDLEtBRUtDLEVBQUksRUFBR0EsRUFBSUYsRUFBZ0JFLElBQUssQ0FDeENELEVBQVFFLFNBRVIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEdBQUtMLEVBQVlLLElBQ2hDSCxFQUFRQyxHQUFHQyxNQUNWRSxJQUFLLFVBQVlELEVBQ2pCRSxLQUFNRixFQUFJLFdBQ1ZHLFNBQVUsU0FLYixPQUFPTixFQUdSLFNBQVNPLGFBQWFQLEVBQVNRLEVBQWNDLEdBQzVDLElBSUlSLEVBQUdFLEVBQUdPLEVBSk5DLEtBRUhDLEVBRGlCWixFQUFRYSxPQUNVLEVBSXBDLElBQUtaLEVBQUksRUFBR0EsR0FBS1EsRUFBZ0JSLElBQUssQ0FLckMsSUFKQVMsR0FDQ0ksU0FBVWIsR0FHTkUsRUFBSSxFQUFHQSxHQUFLSCxFQUFRWSxHQUFpQkMsT0FBUVYsSUFHakRPLEVBRk9WLEVBQVFZLEdBQWlCVCxFQUFJLEdBQUdDLEtBRTFCSCxHQUFLRSxFQUFJLEdBQU0sU0FHN0IsSUFBS0EsRUFBSSxFQUFHQSxHQUFLSyxFQUFhSSxHQUFpQkMsT0FBUVYsSUFHdERPLEVBRk9GLEVBQWFJLEdBQWlCVCxFQUFJLEdBQUdDLEtBRS9CSCxHQUFLRSxFQUFJLEdBQU0sU0FHN0JRLEVBQUdULEtBQUtRLEdBR1QsT0FBT0MsRUFHUixTQUFTSSxvQkFDUkMsVUFBWSxJQUFJQyxPQUFPQyxpQkFDYkMsY0FBY0Msd0JBR3pCLFNBQVNDLHVCQUNSLElBQUlDLEVBQTJCTCxPQUFPTSxZQUFjQyxTQUFTQyxjQUFjLG1CQUFtQkMsd0JBQXdCQyxJQUFNLEdBRTVISCxTQUFTQyxjQUFjLHdCQUF3QkcsTUFBTUMsVUFBWVAsRUFBMkIsS0FDNUZFLFNBQVNDLGNBQWMsd0JBQXdCRyxNQUFNRSxPQUFTUixFQUEyQixLQUcxRixTQUFTUyxvQkFDZ0IsSUFBYmYsWUFDVkEsVUFBWSxJQUFJQyxPQUFPQyxpQkFHeEIsSUFBSWMsRUFBU1IsU0FBU1MsaUJBQWlCLFVBRXhCLE9BQVhELEdBQ0hBLEVBQU9FLFFBQVEsU0FBU0MsR0FDdkIsSUFBSUMsRUFBWUQsRUFBTUUsYUFBYSxRQUVqQixVQUFkRCxHQUF1QyxhQUFkQSxJQUM1QkQsRUFBTUcsTUFBUSxNQUtqQkMsT0FBT0MsS0FBS3hCLFVBQVV5QixpQkFBaUJQLFFBQVEsU0FBUzlCLEdBQ3ZEc0Msc0JBQXNCdEMsRUFBS1ksVUFBVXlCLGdCQUFnQnJDLE1BSXZELFNBQVNzQyxzQkFBc0JDLEVBQVVMLEdBQzFCLE9BQVZBLEdBQW1DLGlCQUFWQSxHQUM1QkMsT0FBT0MsS0FBS0YsR0FBT0osUUFBUSxTQUFTVSxHQUNuQ0Ysc0JBQXNCQyxFQUFXLElBQU1DLEVBQVFOLEVBQU1NLE1BSXZELElBQUlULEVBQVFYLFNBQVNDLGNBQWMsU0FBV2tCLEVBQVcsS0FFekQsR0FBYyxPQUFWUixHQUFtQyxtQkFBVkcsR0FBa0MsT0FBVkEsRUFBZ0IsQ0FDcEUsSUFBSUYsRUFBWUQsRUFBTUUsYUFBYSxRQUduQyxHQUFrQixTQUZMRixFQUFNRSxhQUFhLG1CQUcvQixPQUN3QixVQUFkRCxHQUF1QyxhQUFkQSxFQUNuQ1osU0FBU1MsaUJBQWlCLFNBQVdVLEVBQVcsS0FBS1QsUUFBUSxTQUFTVyxHQUNyRUEsRUFBR0MsUUFBVUQsRUFBR1AsUUFBVUEsRUFBUSxLQUduQ0gsRUFBTUcsTUFEb0IsaUJBQVRBLEVBQ0hTLEtBQUtDLFVBQVVWLEVBQU8sS0FBTSxHQUU1QkEsR0FLakIsU0FBU2xCLHVCQUNSLElBQ0M2QixLQUNBQyxLQW1FRCxPQXJFYTFCLFNBQVNTLGlCQUFpQixVQUloQ0MsUUFBUSxTQUFTQyxHQUN2QixJQUFJQyxFQUFZRCxFQUFNRSxhQUFhLFFBQ2xDYyxFQUFhaEIsRUFBTWlCLFVBQVVDLFNBQVMsWUFDdENDLEVBQVNuQixFQUFNaUIsVUFBVUMsU0FBUyxRQUVuQyxHQUFtQixVQUFkakIsR0FBdUMsYUFBZEEsR0FBOEJELEVBQU1vQixRQUFRLFlBQTFFLENBSUEsSUFBSWpCLEVBQVFILEVBQU1HLE1BRUosS0FBVkEsSUFJVSxTQUFWQSxFQUNIQSxHQUFRLEVBQ1ksVUFBVkEsSUFDVkEsR0FBUSxHQUdMYSxJQUNIYixFQUFRa0IsbUJBQW1CckIsSUFHeEJtQixJQUNIaEIsRUFBUVMsS0FBS1UsTUFBTXRCLEVBQU1HLFFBR1IsV0FBZEYsSUFDSEUsRUFBUW9CLFNBQVN2QixFQUFNRyxNQUFPLEtBRy9CVyxFQUFZZCxFQUFNRSxhQUFhLFNBQVdDLE1BRzNDQyxPQUFPQyxLQUFLUyxHQUFhZixRQUFRLFNBQVN5QixHQUl6QyxJQUFLLElBSERDLEVBQVFELEVBQVFFLE1BQU0sS0FDekJDLEVBQVcsS0FFSDdELEVBQUksRUFBR0EsRUFBSTJELEVBQU0vQyxPQUFRWixJQUFLLENBQ3RDLElBQUk4RCxFQUFPSCxFQUFNM0QsR0FFQSxPQUFiNkQsRUFDQ0YsRUFBTS9DLE9BQVMsSUFBTVosRUFDeEJpRCxFQUFRYSxHQUFRZCxFQUFZVSxTQUVBLElBQWpCVCxFQUFRYSxLQUNsQmIsRUFBUWEsT0FHVEQsRUFBV1osRUFBUWEsSUFFVkgsRUFBTS9DLE9BQVMsSUFBTVosRUFDL0I2RCxFQUFTQyxHQUFRZCxFQUFZVSxTQUVBLElBQWxCRyxFQUFTQyxLQUNuQkQsRUFBU0MsT0FHVkQsRUFBV0EsRUFBU0MsT0FLaEJiLEVBR1IsU0FBU00sbUJBQW1CckIsR0FDM0IsSUFBSTZCLEVBQWE3QixFQUFNRSxhQUFhLG1CQUFtQndCLE1BQU0sS0FFN0QsT0FBT0ksU0FBU0QsRUFBWTdCLEVBQU1HLE9BS25DLFNBQVM0QixxQkFDSEMsaUJBQ0pBLGdCQUFpQixFQUVqQmxELE9BQU9tRCxXQUFXLFdBQ2pCRCxnQkFBaUIsRUFFakI5Qyx3QkFDRSxNQUlMLFNBQVNnRCxXQUNSaEQsdUJBQ0FVLGVBQ0FYLHVCQS9NRCxJQUFJSixVQThMQW1ELGdCQUFpQixFQW9CckJsRCxPQUFPcUQsaUJBQWlCLE9BQVEsV0FDL0IsSUFBSUMsRUFBc0IvQyxTQUFTQyxjQUFjLG1CQUNoRCtDLEVBQW9CaEQsU0FBU0MsY0FBYyxpQkFDM0NnRCxFQUF1QmpELFNBQVNDLGNBQWMscUJBQzlDaUQsRUFBcUJsRCxTQUFTQyxjQUFjLGtCQUU3QzRDLFdBRUFwRCxPQUFPcUQsaUJBQWlCLFNBQVVKLG9CQUVOLE9BQXhCSyxHQUNIQSxFQUFvQkQsaUJBQWlCLFFBQVMsV0FDN0MsSUFBSUssRUFBZ0JuRCxTQUFTQyxjQUFjLG1CQUVyQixPQUFsQmtELElBQ0hBLEVBQWNDLFVBQVksSUFHM0I3RCxxQkFJd0IsT0FBdEJ5RCxHQUNIQSxFQUFrQkYsaUJBQWlCLFFBQVMsV0FDM0NyRCxPQUFPNEQsUUFBUUMsSUFBSTFELDBCQUlRLE9BQXpCcUQsR0FDSEEsRUFBcUJILGlCQUFpQixRQUFTdkMsY0FHckIsT0FBdkIyQyxHQUNIQSxFQUFtQkosaUJBQWlCLFFBQVMsV0FDNUMsSUFBSVMsRUFBZXZELFNBQVNDLGNBQWMsa0JBQ3pDdUQsRUFBb0J4RCxTQUFTQyxjQUFjLHVCQUMzQ3dELEVBQWtCekQsU0FBU0MsY0FBYyxxQkFDekMzQixFQUFhMEIsU0FBU0MsY0FBYywrQkFDcEN5RCxFQUFrQjFELFNBQVNDLGNBQWMscUNBQ3pDMUIsRUFBaUJ5QixTQUFTQyxjQUFjLG9DQUN4QzBELEVBQVczRCxTQUFTQyxjQUFjLDZCQUVuQyxHQUFxQixPQUFqQnNELEdBQStDLE9BQXRCQyxHQUFrRCxPQUFwQkMsR0FDM0MsT0FBZm5GLEdBQTJDLE9BQXBCb0YsR0FBK0MsT0FBbkJuRixHQUF3QyxPQUFib0YsRUFEL0UsQ0FLQSxJQUFJQyxFQUFrQjFCLFNBQVM1RCxFQUFXd0MsTUFBTyxJQUNoRCtDLEVBQXVCM0IsU0FBU3dCLEVBQWdCNUMsTUFBTyxJQUN2RGdELEVBQXNCNUIsU0FBUzNELEVBQWV1QyxNQUFPLElBQ3JEaUQsRUFBZ0I3QixTQUFTeUIsRUFBUzdDLE1BQU8sSUFDekN0QyxFQUFVSCxnQkFBZ0J1RixFQUFpQkUsR0FDM0M5RSxFQUFlWCxnQkFBZ0J3RixFQUFzQkMsR0FDckRFLEVBQU9qRixhQUFhUCxFQUFTUSxFQUFjK0UsR0FFNUNSLEVBQWF6QyxNQUFRUyxLQUFLQyxVQUFVaEQsRUFBUyxLQUFNLEdBQ25EZ0YsRUFBa0IxQyxNQUFRUyxLQUFLQyxVQUFVeEMsRUFBYyxLQUFNLEdBQzdEeUUsRUFBZ0IzQyxNQUFRUyxLQUFLQyxVQUFVd0MsRUFBTSxLQUFNIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciB2aXJ0dWFsREc7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlSGVhZGVycyhoZWFkZXJTaXplLCBoZWFkZXJzUm93U2l6ZSkge1xuXHR2YXIgaGVhZGVycyA9IFtdO1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVyc1Jvd1NpemU7IGkrKykge1xuXHRcdGhlYWRlcnMucHVzaChbXSk7XG5cblx0XHRmb3IgKHZhciBqID0gMTsgaiA8PSBoZWFkZXJTaXplOyBqKyspIHtcblx0XHRcdGhlYWRlcnNbaV0ucHVzaCh7XG5cdFx0XHRcdGtleTogJ2NvbHVtbl8nICsgaixcblx0XHRcdFx0dGV4dDogaiArICcuIGNvbHVtbicsXG5cdFx0XHRcdGRhdGFUeXBlOiAndGV4dCdcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBoZWFkZXJzO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZURhdGEoaGVhZGVycywgZml4ZWRIZWFkZXJzLCBkYXRhc291cmNlU2l6ZSkge1xuXHR2YXIgZHMgPSBbXSxcblx0XHRoZWFkZXJzUm93U2l6ZSA9IGhlYWRlcnMubGVuZ3RoLFxuXHRcdGxhc3RIZWFkZXJJbmRleCA9IGhlYWRlcnNSb3dTaXplIC0gMTtcblxuXHR2YXIgaSwgaiwgcm93LCBjS2V5O1xuXG5cdGZvciAoaSA9IDE7IGkgPD0gZGF0YXNvdXJjZVNpemU7IGkrKykge1xuXHRcdHJvdyA9IHtcblx0XHRcdGNvbHVtbl8xOiBpXG5cdFx0fTtcblxuXHRcdGZvciAoaiA9IDE7IGogPD0gaGVhZGVyc1tsYXN0SGVhZGVySW5kZXhdLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRjS2V5ID0gaGVhZGVyc1tsYXN0SGVhZGVySW5kZXhdW2ogLSAxXS5rZXk7XG5cblx0XHRcdHJvd1tjS2V5XSA9IChpICogKGogKyAxKSkgKyAnLiBjZWxsJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXHRcdH1cblxuXHRcdGZvciAoaiA9IDE7IGogPD0gZml4ZWRIZWFkZXJzW2xhc3RIZWFkZXJJbmRleF0ubGVuZ3RoOyBqKyspIHtcblx0XHRcdGNLZXkgPSBmaXhlZEhlYWRlcnNbbGFzdEhlYWRlckluZGV4XVtqIC0gMV0ua2V5O1xuXG5cdFx0XHRyb3dbY0tleV0gPSAoaSAqIChqICsgMSkpICsgJy4gY2VsbCc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblx0XHR9XG5cblx0XHRkcy5wdXNoKHJvdyk7XG5cdH1cblxuXHRyZXR1cm4gZHM7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlRGF0YUdyaWQoKSB7XG5cdHZpcnR1YWxERyA9IG5ldyB3aW5kb3cuVmlydHVhbERhdGFHcmlkKCk7XG5cdHZpcnR1YWxERy5nZW5lcmF0ZVRhYmxlKGdldE9wdGlvbnNGcm9tSW5wdXRzKCkpO1xufVxuXG5mdW5jdGlvbiBzZXR1cE9wdGlvbkNvbnRhaW5lcigpIHtcblx0dmFyIGdlbmVyYXRvckNvbnRhaW5lckhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWNvbnRhaW5lcicpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIDIwO1xuXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nZW5lcmF0b3ItY29udGFpbmVyJykuc3R5bGUubWF4SGVpZ2h0ID0gZ2VuZXJhdG9yQ29udGFpbmVySGVpZ2h0ICsgJ3B4Jztcblx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdlbmVyYXRvci1jb250YWluZXInKS5zdHlsZS5oZWlnaHQgPSBnZW5lcmF0b3JDb250YWluZXJIZWlnaHQgKyAncHgnO1xufVxuXG5mdW5jdGlvbiBzZXR1cE9wdGlvbnMoKSB7XG5cdGlmICh0eXBlb2YgdmlydHVhbERHID09ICd1bmRlZmluZWQnKSB7XG5cdFx0dmlydHVhbERHID0gbmV3IHdpbmRvdy5WaXJ0dWFsRGF0YUdyaWQoKTtcblx0fVxuXG5cdHZhciBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbbmFtZV0nKTtcblxuXHRpZiAoaW5wdXRzICE9PSBudWxsKSB7XG5cdFx0aW5wdXRzLmZvckVhY2goZnVuY3Rpb24oaW5wdXQpIHtcblx0XHRcdHZhciBpbnB1dFR5cGUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcblxuXHRcdFx0aWYgKGlucHV0VHlwZSAhPT0gJ3JhZGlvJyAmJiBpbnB1dFR5cGUgIT09ICdjaGVja2JveCcpIHtcblx0XHRcdFx0aW5wdXQudmFsdWUgPSAnJztcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdE9iamVjdC5rZXlzKHZpcnR1YWxERy5ERUZBVUxUX09QVElPTlMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0ZmlsbElucHV0c1dpdGhPcHRpb25zKGtleSwgdmlydHVhbERHLkRFRkFVTFRfT1BUSU9OU1trZXldKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGZpbGxJbnB1dHNXaXRoT3B0aW9ucyhrZXlDaGFpbiwgdmFsdWUpIHtcblx0aWYgKHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcblx0XHRPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaChmdW5jdGlvbihzdWJLZXkpIHtcblx0XHRcdGZpbGxJbnB1dHNXaXRoT3B0aW9ucyhrZXlDaGFpbiArICctJyArIHN1YktleSwgdmFsdWVbc3ViS2V5XSk7XG5cdFx0fSk7XG5cdH1cblxuXHR2YXIgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT0nICsga2V5Q2hhaW4gKyAnXScpO1xuXG5cdGlmIChpbnB1dCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgIT09ICdmdW5jdGlvbicgJiYgdmFsdWUgIT09IG51bGwpIHtcblx0XHR2YXIgaW5wdXRUeXBlID0gaW5wdXQuZ2V0QXR0cmlidXRlKCd0eXBlJyksXG5cdFx0XHRub0RlZmF1bHQgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbm8tZGVmYXVsdCcpO1xuXG5cdFx0aWYgKG5vRGVmYXVsdCA9PT0gJ3RydWUnKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fSBlbHNlIGlmIChpbnB1dFR5cGUgPT09ICdyYWRpbycgfHwgaW5wdXRUeXBlID09PSAnY2hlY2tib3gnKSB7XG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbbmFtZT0nICsga2V5Q2hhaW4gKyAnXScpLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcblx0XHRcdFx0ZWwuY2hlY2tlZCA9IGVsLnZhbHVlID09PSB2YWx1ZSArICcnO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcpIHtcblx0XHRcdGlucHV0LnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIDIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbnB1dC52YWx1ZSA9IHZhbHVlO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBnZXRPcHRpb25zRnJvbUlucHV0cygpIHtcblx0dmFyIGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tuYW1lXScpLFxuXHRcdGZsYXRPcHRpb25zID0ge30sXG5cdFx0b3B0aW9ucyA9IHt9O1xuXG5cdGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0KSB7XG5cdFx0dmFyIGlucHV0VHlwZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgndHlwZScpLFxuXHRcdFx0aXNGdW5jdGlvbiA9IGlucHV0LmNsYXNzTGlzdC5jb250YWlucygnZnVuY3Rpb24nKSxcblx0XHRcdGlzSnNvbiA9IGlucHV0LmNsYXNzTGlzdC5jb250YWlucygnanNvbicpO1xuXG5cdFx0aWYgKChpbnB1dFR5cGUgPT09ICdyYWRpbycgfHwgaW5wdXRUeXBlID09PSAnY2hlY2tib3gnKSAmJiAhaW5wdXQubWF0Y2hlcygnOmNoZWNrZWQnKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciB2YWx1ZSA9IGlucHV0LnZhbHVlO1xuXG5cdFx0aWYgKHZhbHVlID09PSAnJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICh2YWx1ZSA9PT0gJ3RydWUnKSB7XG5cdFx0XHR2YWx1ZSA9IHRydWU7XG5cdFx0fSBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykge1xuXHRcdFx0dmFsdWUgPSBmYWxzZTtcblx0XHR9XG5cblx0XHRpZiAoaXNGdW5jdGlvbikge1xuXHRcdFx0dmFsdWUgPSBldmFsRnVuY3Rpb25WYWx1ZXMoaW5wdXQpO1xuXHRcdH1cblxuXHRcdGlmIChpc0pzb24pIHtcblx0XHRcdHZhbHVlID0gSlNPTi5wYXJzZShpbnB1dC52YWx1ZSk7XG5cdFx0fVxuXG5cdFx0aWYgKGlucHV0VHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdHZhbHVlID0gcGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKTtcblx0XHR9XG5cblx0XHRmbGF0T3B0aW9uc1tpbnB1dC5nZXRBdHRyaWJ1dGUoJ25hbWUnKV0gPSB2YWx1ZTtcblx0fSk7XG5cblx0T2JqZWN0LmtleXMoZmxhdE9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24oZmxhdEtleSkge1xuXHRcdHZhciBwYXJ0cyA9IGZsYXRLZXkuc3BsaXQoJy0nKSxcblx0XHRcdHBhcnREYXRhID0gbnVsbDtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBwYXJ0ID0gcGFydHNbaV07XG5cblx0XHRcdGlmIChwYXJ0RGF0YSA9PT0gbnVsbCkge1xuXHRcdFx0XHRpZiAocGFydHMubGVuZ3RoIC0gMSA9PT0gaSkge1xuXHRcdFx0XHRcdG9wdGlvbnNbcGFydF0gPSBmbGF0T3B0aW9uc1tmbGF0S2V5XTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAodHlwZW9mIG9wdGlvbnNbcGFydF0gPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRcdG9wdGlvbnNbcGFydF0gPSB7fTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRwYXJ0RGF0YSA9IG9wdGlvbnNbcGFydF07XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAocGFydHMubGVuZ3RoIC0gMSA9PT0gaSkge1xuXHRcdFx0XHRwYXJ0RGF0YVtwYXJ0XSA9IGZsYXRPcHRpb25zW2ZsYXRLZXldO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBwYXJ0RGF0YVtwYXJ0XSA9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdHBhcnREYXRhW3BhcnRdID0ge307XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRwYXJ0RGF0YSA9IHBhcnREYXRhW3BhcnRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIG9wdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGV2YWxGdW5jdGlvblZhbHVlcyhpbnB1dCkge1xuXHR2YXIgcGFyYW1BcnJheSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS1hdHRyaWJ1dGVzJykuc3BsaXQoJywnKTtcblxuXHRyZXR1cm4gRnVuY3Rpb24ocGFyYW1BcnJheSwgaW5wdXQudmFsdWUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG59XG5cbnZhciBpc0V2ZW50RGVsYXllZCA9IGZhbHNlO1xuXG5mdW5jdGlvbiByZXNpemVFdmVudEhhbmRsZXIoKSB7XG5cdGlmICghaXNFdmVudERlbGF5ZWQpIHtcblx0XHRpc0V2ZW50RGVsYXllZCA9IHRydWU7XG5cblx0XHR3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdGlzRXZlbnREZWxheWVkID0gZmFsc2U7XG5cblx0XHRcdHNldHVwT3B0aW9uQ29udGFpbmVyKCk7XG5cdFx0fSwgMjAwKTtcblx0fVxufVxuXG5mdW5jdGlvbiBpbml0UGFnZSgpIHtcblx0c2V0dXBPcHRpb25Db250YWluZXIoKTtcblx0c2V0dXBPcHRpb25zKCk7XG5cdGdldE9wdGlvbnNGcm9tSW5wdXRzKCk7XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XG5cdHZhciBnZW5lcmF0ZVRhYmxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dlbmVyYXRlLXRhYmxlJyksXG5cdFx0dGVzdE9wdGlvbnNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGVzdC1vcHRpb25zJyksXG5cdFx0cmVzZXRUb0RlZmF1bHRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVzZXQtdG8tZGVmYXVsdCcpLFxuXHRcdGdlbmVyYXRlRGF0YUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZW5lcmF0ZS1kYXRhJyk7XG5cblx0aW5pdFBhZ2UoKTtcblxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplRXZlbnRIYW5kbGVyKTtcblxuXHRpZiAoZ2VuZXJhdGVUYWJsZUJ1dHRvbiAhPT0gbnVsbCkge1xuXHRcdGdlbmVyYXRlVGFibGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBkYXRhQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGEtY29udGFpbmVyJyk7XG5cblx0XHRcdGlmIChkYXRhQ29udGFpbmVyICE9PSBudWxsKSB7XG5cdFx0XHRcdGRhdGFDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG5cdFx0XHR9XG5cblx0XHRcdGdlbmVyYXRlRGF0YUdyaWQoKTtcblx0XHR9KTtcblx0fVxuXG5cdGlmICh0ZXN0T3B0aW9uc0J1dHRvbiAhPT0gbnVsbCkge1xuXHRcdHRlc3RPcHRpb25zQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHR3aW5kb3cuY29uc29sZS5sb2coZ2V0T3B0aW9uc0Zyb21JbnB1dHMoKSk7XG5cdFx0fSk7XG5cdH1cblxuXHRpZiAocmVzZXRUb0RlZmF1bHRCdXR0b24gIT09IG51bGwpIHtcblx0XHRyZXNldFRvRGVmYXVsdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNldHVwT3B0aW9ucyk7XG5cdH1cblxuXHRpZiAoZ2VuZXJhdGVEYXRhQnV0dG9uICE9PSBudWxsKSB7XG5cdFx0Z2VuZXJhdGVEYXRhQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaGVhZGVyc0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9aGVhZGVyc10nKSxcblx0XHRcdFx0Zml4ZWRIZWFkZXJzSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT1maXhlZEhlYWRlcnNdJyksXG5cdFx0XHRcdGRhdGFTb3VyY2VJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPWRhdGFTb3VyY2VdJyksXG5cdFx0XHRcdGhlYWRlclNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0YS1nZW5lcmF0b3ItaGVhZGVyLXNpemUnKSxcblx0XHRcdFx0Zml4ZWRIZWFkZXJTaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGEtZ2VuZXJhdG9yLWZpeGVkLWhlYWRlci1zaXplJyksXG5cdFx0XHRcdGhlYWRlcnNSb3dTaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGEtZ2VuZXJhdG9yLWhlYWRlcnMtcm93LXNpemUnKSxcblx0XHRcdFx0ZGF0YVNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0YS1nZW5lcmF0b3ItZGF0YS1zaXplJyk7XG5cblx0XHRcdGlmIChoZWFkZXJzSW5wdXQgPT09IG51bGwgfHwgZml4ZWRIZWFkZXJzSW5wdXQgPT09IG51bGwgfHwgZGF0YVNvdXJjZUlucHV0ID09PSBudWxsIHx8XG5cdFx0XHRcdGhlYWRlclNpemUgPT09IG51bGwgfHwgZml4ZWRIZWFkZXJTaXplID09PSBudWxsIHx8IGhlYWRlcnNSb3dTaXplID09PSBudWxsIHx8IGRhdGFTaXplID09PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGhlYWRlclNpemVWYWx1ZSA9IHBhcnNlSW50KGhlYWRlclNpemUudmFsdWUsIDEwKSxcblx0XHRcdFx0Zml4ZWRIZWFkZXJTaXplVmFsdWUgPSBwYXJzZUludChmaXhlZEhlYWRlclNpemUudmFsdWUsIDEwKSxcblx0XHRcdFx0aGVhZGVyc1Jvd1NpemVWYWx1ZSA9IHBhcnNlSW50KGhlYWRlcnNSb3dTaXplLnZhbHVlLCAxMCksXG5cdFx0XHRcdGRhdGFTaXplVmFsdWUgPSBwYXJzZUludChkYXRhU2l6ZS52YWx1ZSwgMTApLFxuXHRcdFx0XHRoZWFkZXJzID0gZ2VuZXJhdGVIZWFkZXJzKGhlYWRlclNpemVWYWx1ZSwgaGVhZGVyc1Jvd1NpemVWYWx1ZSksXG5cdFx0XHRcdGZpeGVkSGVhZGVycyA9IGdlbmVyYXRlSGVhZGVycyhmaXhlZEhlYWRlclNpemVWYWx1ZSwgaGVhZGVyc1Jvd1NpemVWYWx1ZSksXG5cdFx0XHRcdGRhdGEgPSBnZW5lcmF0ZURhdGEoaGVhZGVycywgZml4ZWRIZWFkZXJzLCBkYXRhU2l6ZVZhbHVlKTtcblxuXHRcdFx0aGVhZGVyc0lucHV0LnZhbHVlID0gSlNPTi5zdHJpbmdpZnkoaGVhZGVycywgbnVsbCwgMik7XG5cdFx0XHRmaXhlZEhlYWRlcnNJbnB1dC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KGZpeGVkSGVhZGVycywgbnVsbCwgMik7XG5cdFx0XHRkYXRhU291cmNlSW5wdXQudmFsdWUgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKTtcblx0XHR9KTtcblx0fVxufSk7Il19
